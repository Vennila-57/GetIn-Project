<!DOCTYPE html>
<html>
  <head>
    <title>EmailJS Test</title>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"
    ></script>
  </head>
  <body>
    <h1>EmailJS Test Page</h1>
    <p>This page will test if your EmailJS configuration is working.</p>

    <form id="testForm">
      <label
        >Your Email:
        <input
          type="email"
          id="testEmail"
          placeholder="Enter your Gmail address"
          required /></label
      ><br /><br />
      <button type="submit">Send Test OTP</button>
    </form>

    <div id="result"></div>

    <script>
      // Initialize EmailJS
      emailjs.init("LBJgSdgpYpTjqWksd");

      document
        .getElementById("testForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const email = document.getElementById("testEmail").value;
          const resultDiv = document.getElementById("result");

          resultDiv.innerHTML = "Sending test email...";

          try {
            const templateParams = {
              to_email: email,
              otp_code: otp,
              user_role: role,
              expires_in: "5 minutes",
            };

            console.log("Sending with params:", templateParams);

            const result = await emailjs.send(
              "service_xw96qxf",
              "template_kgpg70b",
              templateParams
            );

            console.log("Success:", result);
            resultDiv.innerHTML = `✅ Test email sent successfully to ${email}! Check your inbox (and spam folder).`;
            resultDiv.style.color = "green";
          } catch (error) {
            console.error("Error:", error);
            resultDiv.innerHTML = `❌ Error: ${error.message || error}`;
            resultDiv.style.color = "red";
          }
        });
    </script>
  </body>
</html>
